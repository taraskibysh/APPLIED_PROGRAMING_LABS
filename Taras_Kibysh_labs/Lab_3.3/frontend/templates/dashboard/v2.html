<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Діаграми з інтерактивними фільтрами</title>
    <!-- Include Bokeh JS and CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.bokeh.org/bokeh/release/bokeh-3.6.2.min.css">
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-3.6.2.min.js"></script>
</head>
<body>
    <h1>Інтерактивні графіки</h1>

    <!-- Перша діаграма -->
    <h2>Середня зарплата за професією</h2>
    <div>
        {{ bokeh_script1|safe }}
        {{ bokeh_div1|safe }}
    </div>

    <!-- Форма для вибору професій -->
    <form method="get">
        <h3>Оберіть професії:</h3>
        {% for position in positions %}
        <label>
            <input type="checkbox" name="positions" value="{{ position }}"
                   {% if position in selected_positions %}checked{% endif %}>
            {{ position }}
        </label>
        <br>
        {% endfor %}
        <button type="submit">Застосувати</button>
    </form>

    <!-- Друга діаграма -->
    <h2>Кількість страхувань за роками</h2>
    <div>
        {{ bokeh_script2|safe }}
        {{ bokeh_div2|safe }}
    </div>

    <!-- Третя діаграма -->
    <h2>Розподіл віку за статтю</h2>
    <div>
        {{ bokeh_script3|safe }}
        {{ bokeh_div3|safe }}
    </div>

    <!-- Форма для фільтрації вікових груп і статей -->
    <form method="get">
        <h3>Оберіть статі:</h3>
        {% for gender in genders %}
        <label>
            <input type="checkbox" name="genders" value="{{ gender }}"
                   {% if gender in selected_genders %}checked{% endif %}>
            {{ gender }}
        </label>
        <br>
        {% endfor %}

        <h3>Оберіть вікові групи:</h3>
        {% for age_group in age_groups %}
        <label>
            <input type="checkbox" name="age_groups" value="{{ age_group }}"
                   {% if age_group in selected_age_groups %}checked{% endif %}>
            {{ age_group }}
        </label>
        <br>
        {% endfor %}
        <button type="submit">Застосувати</button>
    </form>

    <!-- Четверта діаграма -->
    <div>
        {{ bokeh_script4|safe }}
        {{ bokeh_div4|safe }}
    </div>

    <form method="get">
        <h3>Вибір статусів</h3>
        {% for status in statuses %}
        <label>
            <input type="checkbox" name="statuses" value="{{ status }}"
                   {% if status in selected_statuses %} checked {% endif %}>
            {{ status }}
        </label>
        <br>
        {% endfor %}
        <button type="submit">Застосувати</button>
    </form>

    <!-- П'ята діаграма -->
    <h1>Served People Capacity by Worker</h1>
    <div>
        <form method="get">
            <label for="workers">Select Workers:</label>
            <select id="workers" name="workers" multiple>
                {% for worker in workers %}
                    <option value="{{ worker }}" {% if worker in selected_workers %}selected{% endif %}>{{ worker }}</option>
                {% endfor %}
            </select>
            <button type="submit">Update Chart</button>
        </form>
    </div>

    <div>
        {{ bokeh_script5|safe }}
        {{ bokeh_div5|safe }}
    </div>

    <div>
        {{ bokeh_script6|safe }}
        {{ bokeh_div6|safe }}
    </div>

</body>
</html>
